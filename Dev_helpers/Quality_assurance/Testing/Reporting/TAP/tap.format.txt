
       
   TAP  
       



ALTERNATIVES ==>                  #  - Jasmine:
                                  #     - own reporters
                                  #     - available: min, normal, spec, HTML, TAP, JUnit, NUnit, AppVeyor, TeamCity
                                  #  - Mocha:
                                  #     - own reporters
                                  #     - available: min, normal, spec, fun, HTML, Markdown, JSON, TAP, XUnit
                                  #  - Jest:
                                  #     - own reporters

VERSION ==>                       #13
                                13#13-only is marked like this
                                 ##Non-standard

GOAL ==>                          #Test reporting format
                                  #Streaming-friendly
                                  #Fairly generic and easy to parse

MIME TYPE ==>                     #application/tap

UNKNOWN LINES ==>                 #Are allowed but ignored (for future compatibility)


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:            SYNTAX             :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


TAP version NUM                   #Required since version 13

# COMMENT                         #

1..NUM [# DIRECTIVE [COMMENT]]    #"plan": this file should have NUM assertions
                                  #Must be at beginning or end

# TEST_TITLE                     ##Beginning of a test (i.e. a group of assertions)

[not] ok [INDEX] [ASSERT_TITLE]   #Single assertion
 [# DIRECTIVE [COMMENT]]          #INDEX is incrementing from 1 for each assertion (def: auto-incrementing)
                                  #ASSERT_TITLE should not start with dot
                                  #DIRECTIVE can be:
                                  #  - SKIP: tested but skipped (should be ok)
                                  #  - TODO: not tested yet (should be not ok, however be treated as ok)
  ---                             #Error properties, as YAML
  VAR: VAL                       ##Often used:
  ...                            ##  - operator STR: assertion function
                                 ##  - expected|actual VAL
                                 ##     - sometimes called wanted|found
                                 ##  - message STR: error message
                                 ##  - stack STR:
                                 ##     - multiline starting next line
                                 ##     - must be last property
                                 ##     - each line must be "at: NAME (PATH:LINE:COL)"
                                 ##  - severity 'warn|error|fail'
                                 ##  - data OBJ

NESTED TESTS ==>                 ##E.g. when using describe()
                                 ##Have same structure as above except no plan nor pragma
                                 ##Parent assertion is the describe()
                                 ##TEST_TITLE sometimes prepended 'Subtest: '
                                 ##There are several syntaxes:
                                 ##  - indented, before their parent assertion
                                 ##  - indented, after their parent assertion, enclosed with {}
                                 ##     ("buffered")
                                 ##     [not] ok ... {
                                 ##       CHILD
                                 ##     }
                                 ##     (not "buffered")
                                 ##     [not] ok ...
                                 ##     ---
                                 ##     [YAML error props]
                                 ##     ...
                                 ##     {
                                 ##       CHILD
                                 ##     }

# tests: NUM
# pass: NUM
# fail: NUM                      ##At end of file. In that order.
# ok                             ##Counts the number of assertions (not tests)

Bail out! [COMMENT]               #Testing was interrupted

pragma +VAR|-VAR                 ##Parser-specific directive


                                             /=+===============================+=\
                                            /  :                               :  \
                                            )==:           PRODUCERS           :==(
                                            \  :_______________________________:  /
                                             \=+===============================+=/


MOCHA ==>                         #  - no TAP version
                                  #  - no TEST_TITLE
                                  #  - plan
                                  #  - assertions:
                                  #     - ASSERT_TITLE contains describe() and test title
                                  #        - no CHILD
                                  #     - can use # SKIP
                                  #     - YAML error properties: ERROR.toString() + ERROR.stack as is
                                  #  - # tests|pass|fail comment (but not # ok)
                                  #  - no Bail out!
