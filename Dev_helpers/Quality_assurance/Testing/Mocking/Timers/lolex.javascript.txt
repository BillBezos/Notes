
         
   LOLEX  
         


LOLEX                             #Version 2.3.2
                                  #Node and browser
                                  #Mocks setTimeout, setInterval(), etc.

LOLEX.install([OPTS])->CLOCK      #Mocks:
                                  #  - set|clearTimeout|Immediate|Interval(), request|cancelAnimationFrame(), Date() (or 'FUNC'...),
                                  #    performance.now(), process.nextTick(), process.hrtime()
                                  #  - so they are synchronous and are advanced with CLOCK.tick(NUM)
                                  #OPTS:
                                  #  - target OBJ (def: global)
                                  #  - now DATE[_NUM] (def: 0)
                                  #  - toFake 'FUNC'_ARR (def: all except 'nextTick')
                                  #  - shouldAdvanceTime BOOL (def: false):
                                  #     - using OPTS.advanceTimeDelta NUM (def: 20)
                                  #     - calls setInterval(CLOCK.tick(NUM), NUM)
                                  #     - i.e. after each loop, CLOCK will follow real time (with NUM increments)
CLOCK.uninstall()                 #

CLOCK.tick(NUM|'[HH:][MM:]SS')    #Can be negative

CLOCK.next()                      #Do CLOCK.tick() until the first timer's callback
CLOCK.runToFrame()                #Do CLOCK.next() until the first requestAnimationFrame()'s callback
CLOCK.runAll()                    #Do CLOCK.next() until the last timer's callback
                                  #If more than OPTS.loopLimit NUM (def: 1000) CLOCK.next(), throw error
CLOCK.runToLast()                 #Same except if new timers were adding after the last timer, still stops at that last timer

CLOCK.setSystemTime(DATE)->CLOCK  #Change current DATE returned by performance.now() and Date()
                                  #Does not impact other functions

LOLEX.createClock
 ([OPTS.now][, OPTS.loopLimit])   #Same as LOLEX.install() but does not mock
 ->CLOCK                          #Instead, use CLOCK.setTimeout|...()
